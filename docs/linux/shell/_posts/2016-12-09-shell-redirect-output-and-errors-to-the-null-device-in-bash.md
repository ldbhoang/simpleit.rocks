---
title: #If title is omitted, Jekyll generates a title based in the slug/filename
subtitle: How to redirect output and errors to /dev/null in Bash
description: > # Under 140 char. Used for meta description and main description
  Understanding input and output redirection in bash shell scripts to
  avoid printing output and errors.
layout: post
tags: 
- bash
- linux
- redirection
---

## Overview

In shell scripting, you often want to avoid printing error messages to
the console or discard any possible output the script could
generate. Capturing program output can be done with *I/O Redirection*
in Linux.

## Concepts

In Linux, everything is a file, even data streams and devices are
treated like ordinary files.

There are always three default files open:

stdin
: the keyboard

stdout
: the screen

stderr
: error messages output to the screen

Output from these files can be captured and sent as input to another
file, command, program or script. This is called **redirection**.

How do you choose what file to handle? With **file descriptors**.

### File descriptors

> A file descriptor is simply a number that the operating system
> assigns to an open file to keep track of it. Consider it a
> simplified type of file pointer. It is analogous to a file handle in
> C.
> <footer class="blockquote-footer"> <cite>Chapter 20. I/O Redirection in <a href="http://www.tldp.org/LDP/abs/html/io-redirection.html#FTN.AEN17894">Advanced Bash-Scripting Guide</a></cite></footer>
{: class="blockquote" cite="http://www.tldp.org/LDP/abs/html/io-redirection.html#FTN.AEN17894"}

Kowing the *file descriptors* of each file, we can select with which
one we want to work and process redirection between them.

The file descriptors for our open files are:

- stdin: 0
- stdout: 1
- stderr: 2

Then we can use `M>N` in each command to redirect the file descriptor
**M** to **N**: 

- **M**: file descriptor, which defaults to 1, if not explicitly set.

**N** can be:

- **N**: filename, 
- **&N**: another file descriptor

### Null device

Linux has a special device file that discards all data written to
it. In Linux this device is **/dev/null**.

## Redirect to the null device.

The way to discard commands output and error messages is to redirect
them to the *null device*.

This can be done explicitely redirecting both output and/or errors in
many ways:

Redirect stdout to the null device:

    1>/dev/null

Redirect stderr to the null device

    2>/dev/null
   
Redirect both stdout and stderr to the null device

    &>/dev/null

Redirect stderr to the same file of stdout

    1>/dev/null 2>&1
   
## Examples

Let's see a simple example with the `ls` command:

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>ls >/dev/null</kbd>

</samp>
</pre>

stdout file descriptor isn't present so it defaults to 1, any error
would be echoed to the screen.

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>ls -error 1>/dev/null</kbd>
ls: invalid option -- 'e'
Try 'ls --help' for more information.
</samp>
</pre>

we only redirect *stdout* but we still see the error generated by the
command.

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>ls -error 2>/dev/null</kbd>
</samp>
</pre>

we produce an error with `ls` but redirects the error output to the
null device, so we don't see any output in the screen.


<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>ls -error &>/dev/null</kbd>
<span class="shell-prompt">$</span> <kbd>ls &>/dev/null</kbd>
</samp>
</pre>

we avoid outputting errors and the standard command output.

## Summary

Understanding *file descriptors* is key to handle commands output and
errors. 

This is a common practice to avoid outputting anything in *cronjobs*
where the output would be sent to the users email.

Additionally, it is very useful to work with bash redirection not only
to the null device.

## References


- <http://www.tldp.org/LDP/abs/html/io-redirection.html>
- <https://en.wikipedia.org/wiki/Null_device>
- <https://en.wikipedia.org/wiki/Standard_streams>
- <https://en.wikipedia.org/wiki/Device_file>
